#Project4
***申文钦   自动化62 2160504046***
###一、空域低通滤波器：分别用高斯滤波器（固定方差为1.5）和中值滤波器去平滑测试图像test1和2，模板大小分别是3x3 ， 5x5 ，7x7； 分析各自优缺点

>高斯滤波是一种线性平滑滤波，适用于消除高斯噪声，广泛应用于图像处理的减噪过程。通俗的讲，高斯滤波就是对整幅图像进行加权平均的过程，每一个像素点的值，都由其本身和邻域内的其他像素值经过加权平均后得到。高斯滤波的具体操作是：用一个模板（或称卷积、掩模）扫描图像中的每一个像素，用模板确定的邻域内像素的加权平均灰度值去替代模板中心像素点的值。

>中值滤波法是一种非线性平滑技术，它将每一像素点的灰度值设置为该点某邻域窗口内的所有像素点灰度值的中值。

高斯滤波具体步骤：

 1. 根据正态分布函数，，生成相应大小的卷积核，其方差为1.5，用于高斯滤波。
 2. 将原图像经过扩展补零后，与卷积核进行卷积，卷积的值代表滤波后图像对应位置像素的亮度值
 3. 去除扩展的部分，得到高斯滤波后的图片。

中值滤波具体步骤：
 1. 将原图根据题目要求卷积核的大小进行扩展。
 2. 将每个像素值替换为其相应领域内所有像素的均值。
 3. 去除扩展的部分，得到中值滤波图像。

结果如下：
![test1高斯](https://s2.ax1x.com/2019/03/19/AuNbvj.png)
![test2高斯](https://s2.ax1x.com/2019/03/19/AuNxaV.png)
![test1中值](https://s2.ax1x.com/2019/03/19/AuUpPU.png)
![test2中值](https://s2.ax1x.com/2019/03/19/AuU9GF.png)

结果分析：
从处理结果可以看到：
中值滤波的优点是计算简单迅速，能够有效的去除图像中的椒盐噪声；缺点则是对于一些高斯型噪声不能很好的滤除。
而高斯滤波的优点则在于对高斯型噪声有非常好的降噪效果，缺点则是计算相对复杂。同时，高斯滤波相当于对整幅图像进行了模糊化处理，这一点有利有弊，视情况而定。
对于这几幅图来看，采用中值滤波的效果略优于高斯滤波的效果。这两种滤波效果都与掩模大小密切相关，掩模越大，滤波效果越好，而且图像更加明亮。随着卷积核的大小不断变大，低通滤波的效果也不断变好。

###二、利用高通滤波器滤波测试图像test3,4：包括unsharp masking, Sobel edge detector,Laplace edge detection 和 Canny algorithm，分析各自优缺点

1.unsharp masking
  非锐化掩蔽的基本原理如下：
 1. 模糊原图像 f(x,y)->s(x,y)。
 2. 从原图像中减去模糊图像，产生的差值图像称为模板：Gm(x,y)=f(x,y)-s(x,y);
 3. 将模板加到原图像中：G(x,y)=f(x,y) + k*Gm(x,y)
    这里的k(k>=0)取值有三种可能：
    当K=1时，为非锐化掩蔽
    当k>1时，高提升滤波，系数越大对细节的增强越明显。
    当k<1时，不强调非锐化模板的贡献

结果：
![test3 USM](https://s2.ax1x.com/2019/03/19/AuUUJS.png)
![test4 USM](https://s2.ax1x.com/2019/03/19/AuU0Mj.png)

结果分析：
如原理部分所述，反锐化掩模、高提升滤波算法可以使得图像的边缘轮廓和高频成分增强，其效果与 k 取值密切相关，k 越大对细节的增强就越明显。但当处理如test3这种简单图象时，效果较为明显，但是test4这种边缘较多的复杂图片时，效果并不是很理想。

2.Sobel edge detector
>Sobel算子是像素图像边缘检测中最重要的算子之一，在机器学习、数字媒体、计算机视觉等信息科技领域起着举足轻重的作用。在技术上，它是一个离散的一阶差分算子，用来计算图像亮度函数的一阶梯度之近似值。在图像的任何一点使用此算子，将会产生该点对应的梯度矢量或是其法矢量。

实现步骤：

 1. 构造x，y方向的Sobel算子Sx和Sy
 2. 分别用原图与Sx，Sy进行二维卷积，得到两个方向的梯度矩阵
 3. 将两个方向梯度分别求绝对值并相加得到图像的梯度矩阵
 4. 将梯度矩阵转成uint8格式，即为处理后图像

结果：
![sobel](https://s2.ax1x.com/2019/03/19/AuU5LR.png)

结果分析：
由运行结果可见，sobel能够检测出图像中的边缘。但是由test3的结果可以看出来，边缘检测的位置并不十分的准确。显示的边缘较为粗大，但是精确度不高。

3.Laplace edge detection

>在图像处理，我们知道经常把Laplace算子作为边缘检测之一，也是工程数学中常用的一种积分变换。

实现步骤：

 1. 构造出扩展Laplace算子
 2. 将原图与Laplace算子进行二维卷积，结果转为uint8格式即为处理后图像

结果：
![Laplace](https://s2.ax1x.com/2019/03/19/AuUvyd.png)

结果分析：
采用Laplacian边缘检测算法，可以看出当图像比较"干净"时有较好的边缘检测作用，且精度明显优于Sobel算法。但是Laplacian对噪声过于敏感，很容易受到噪音干扰，可以看到即使test3的检测结果仍然不准确。

4.Canny algorithm

Canny边缘检测算法可以分为以下5个步骤：

 1.应用高斯滤波来平滑图像，目的是去除噪声
 2.用Sobel算子得到x，y方向的梯度幅值和方向
 3.应用非最大抑制（non-maximum suppression）技术来消除边误检

    1.将梯度方向从0°开始，每45°化为一个区域，共四个区域（正负视为同一方向）
    2.对像素点所在区域找到区域两侧的正像素点，根据梯度方向进行加权平均，就可以插值得到两个亚像素点g1，g2，分别处于梯度方向的两侧
    3.判断像素点是否大于g1，g2，即判断在梯度方向上是否为极大值，若不是则置0
   
 4.应用双阈值的方法来决定可能的（潜在的）边界

    1.大于高阈值T2的值一定保留，小于低阈值T1的一定置0
    2.介于中间的点，如果在其8-邻域内有确定保留的点，则它保留，否则置0
   
 5.利用滞后技术来跟踪边界


结果：
![test3_canny](https://s2.ax1x.com/2019/03/19/AuaXNV.png)
![test4_canny](https://s2.ax1x.com/2019/03/19/Auaz3F.png)

结果分析：
Canny算法几乎不受噪音干扰，且得到的边缘精度很高，但是算法较为复杂费时，并且处理效果与高斯滤波的两个参数（掩模大小、标准差sigma），以及自身的两个参数（高低阈值）的选取密切相关，这几个参数的选取也根据图像有所不同。在本题中，为将两幅图一起处理输出，综合比较后选取高斯掩模大小为5，sigma为1.5，高阈值为30，低阈值为10，得到的效果较为良好。但是，由于对边界点的筛选要求更高，使得边界连续性较差，需要进一步的编写函数将边界点连在一起。